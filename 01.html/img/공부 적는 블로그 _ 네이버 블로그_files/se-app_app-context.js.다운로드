(window.__se_editor_jsonp=window.__se_editor_jsonp||[]).push([[11],{1228:function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n,o,a,i,s,p,c,d,u=r(61),l=r.n(u),g=r(1),h=r.n(g),y=r(50),f=r.n(y),_=(r(62),r(49)),v=r(51),b={INSIDE:["text","object","complex","iframe","image"],OUTSIDE:["template","groupLayer","aside","library"],EXTERNAL:["external-file","external-text","external-complex"]},m=(n=_.g.ref,o=function(){function e(e){void 0===e&&(e={disable:!1}),l()(this,"progress",a,this),l()(this,"type",i,this),l()(this,"items",s,this),l()(this,"dropPosition",p,this),l()(this,"disabled",c,this),l()(this,"updateReadySelection",d,this),this.disabled=e.disable}var t=e.prototype;return t.setItem=function(e,t,r){this.items.replace([e]),this.type=t,this.dropCallback=r},t.setItems=function(e,t,r){this.items.replace(e),this.type=t,this.dropCallback=r},t.reset=function(){this.items=[],this.type=null,this.progress="none",this.dropCallback=null,this.dropPosition={direction:"",point:{compId:"",unitId:"",paraId:null,nodeId:null,offset:0}}},t.disable=function(){this.disabled=!0},t.enable=function(){this.disabled=!1},h()(e,[{key:"isInsideType",get:function(){return b.INSIDE.includes(this.type)}},{key:"isOutsideType",get:function(){return b.OUTSIDE.includes(this.type)}},{key:"isDragging",get:function(){return["dragging","undroppable"].includes(this.progress)}},{key:"isExternalType",get:function(){return b.EXTERNAL.includes(this.type)}},{key:"isCanvasBottomActivated",get:function(){return"dragging"===this.progress&&this.dropPosition.direction===v.x.CANVAS_BOTTOM}},{key:"isDisabled",get:function(){return!0===this.disabled}}]),e}(),a=f()(o.prototype,"progress",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),i=f()(o.prototype,"type",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f()(o.prototype,"items",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=f()(o.prototype,"dropPosition",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{direction:"",point:{compId:"",unitId:"",paraId:null,nodeId:null,offset:0}}}}),c=f()(o.prototype,"disabled",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=f()(o.prototype,"updateReadySelection",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f()(o.prototype,"isInsideType",[_.e],Object.getOwnPropertyDescriptor(o.prototype,"isInsideType"),o.prototype),f()(o.prototype,"isOutsideType",[_.e],Object.getOwnPropertyDescriptor(o.prototype,"isOutsideType"),o.prototype),f()(o.prototype,"isDragging",[_.e],Object.getOwnPropertyDescriptor(o.prototype,"isDragging"),o.prototype),f()(o.prototype,"isExternalType",[_.e],Object.getOwnPropertyDescriptor(o.prototype,"isExternalType"),o.prototype),f()(o.prototype,"isCanvasBottomActivated",[_.e],Object.getOwnPropertyDescriptor(o.prototype,"isCanvasBottomActivated"),o.prototype),f()(o.prototype,"setItem",[_.d],Object.getOwnPropertyDescriptor(o.prototype,"setItem"),o.prototype),f()(o.prototype,"setItems",[_.d],Object.getOwnPropertyDescriptor(o.prototype,"setItems"),o.prototype),f()(o.prototype,"reset",[_.d],Object.getOwnPropertyDescriptor(o.prototype,"reset"),o.prototype),f()(o.prototype,"isDisabled",[_.e],Object.getOwnPropertyDescriptor(o.prototype,"isDisabled"),o.prototype),f()(o.prototype,"disable",[_.d],Object.getOwnPropertyDescriptor(o.prototype,"disable"),o.prototype),f()(o.prototype,"enable",[_.d],Object.getOwnPropertyDescriptor(o.prototype,"enable"),o.prototype),o),D=m;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/stores/drag-and-drop-store.js",localName:t}})}catch(e){}}e(b,"TYPES"),e(m,"DragAndDropStore"),e(D,"default")}()},1230:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n={};function o(e){var t="",r=e,n=e.split(".");return n.length>1&&(r=n[0]||"",t=n[1]||""),{eventNS:t,eventType:r}}function a(e,t,r){return e&&0!==e.length?e.filter(function(e){return t?t!==e.handler:r!==e.eventNS}):[]}var i={on:function(e,t){var r=o(e),a=r.eventNS,i=r.eventType,s=n[i];s||(s=[]),s.push({eventNS:a,handler:t}),n[i]=s},off:function(e,t){var r=o(e),i=r.eventNS,s=r.eventType;s&&""!==s?n[s]=a(n[s],t,i):i&&""!==i&&Object.keys(n).forEach(function(e){n[e]=a(n[e],t,i)})},triggerEvent:function(e,t){var r=n[e];r&&0!==r.length&&(n[e]=r.filter(function(e){var r=e.handler;try{return r(t),!0}catch(e){return!1}}))},getEventLength:function(e){return(n[e]||[]).length},clear:function(){n={}}};!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/modules/global-event/index.js",localName:t}})}catch(e){}}e(n,"EVENT_HANDLER_MAP"),e(o,"getEventInfo"),e(a,"filterHandlerList"),e(i,"globalEventProxy")}()},1232:function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n,o,a,i,s=r(61),p=r.n(s),c=r(1),d=r.n(c),u=r(57),l=r.n(u),g=r(0),h=r.n(g),y=r(50),f=r.n(y),_=(r(62),r(49)),v=r(51),b=(n=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._processingTaskCount=0,t._contentTextLength=null,p()(t,"_readOnly",o,l()(t)),p()(t,"_paused",a,l()(t)),p()(t,"viewMode",i,l()(t)),t}h()(t,e);var r=t.prototype;return r.busy=function(){this._processingTaskCount++},r.idle=function(){this._processingTaskCount--},r.startReadOnly=function(){this._readOnly=!0},r.finishReadOnly=function(){this._readOnly=!1},r.pause=function(){this._paused=!0},r.unpause=function(){this._paused=!1},r.setContentTextLength=function(e){this._contentTextLength=e},r.changeViewMode=function(e){this.viewMode=e},d()(t,[{key:"readOnly",get:function(){return this._readOnly}},{key:"paused",get:function(){return this._paused}},{key:"isProcessing",get:function(){return this._processingTaskCount>0}},{key:"contentTextLength",get:function(){return this._contentTextLength}}]),t}(v.w),o=f()(n.prototype,"_readOnly",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=f()(n.prototype,"_paused",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=f()(n.prototype,"viewMode",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.S.VIEW_MODE_PC}}),f()(n.prototype,"readOnly",[_.e],Object.getOwnPropertyDescriptor(n.prototype,"readOnly"),n.prototype),f()(n.prototype,"paused",[_.e],Object.getOwnPropertyDescriptor(n.prototype,"paused"),n.prototype),n),m=b;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/stores/editor-status-store.js",localName:t}})}catch(e){}}e(b,"EditorStatusStore"),e(m,"default")}()},225:function(e,t,r){"use strict";var n,o=r(0),a=r.n(o),i=r(50),s=r.n(i),p=r(54),c=r.n(p),d=r(52),u=r(1230),l=r(1228),g=r(1232),h=r(259),y=r(737),f=r(738),_=r(49),v=r(347),b=r(51),m=(n=function(e){function t(){var t;t=e.call(this)||this;var r=b.U.get("configAgent").get("productEnv.deviceType");return t._isDesktop=r===b.t.DESKTOP,t}a()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._canvas=b.U.get("domAccessor").getCanvas()},r.render=function(){var e=this.props,t=e.className,r=e.store,n=c()(t,{"se-is-dragging":r.isDragging}),o=this._isDesktop;return _.b.createElement("div",{className:n,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseMove:this._handleMouseMove,onMouseUp:this._handleMouseUp,onDragStart:o?this._handleDragStart:function(){},onDragEnter:o?this._handleDragEnter:function(){},onDragLeave:o?this._handleDragLeave:function(){},onDragOver:o?this._handleDragOver:function(){},onDragEnd:o?this._handleDragEnd:function(){},onDrop:o?this._handleDrop:function(){}},this.props.children)},r._handleClick=function(e){this.props.onEnhancerClick(e)},r._handleMouseDown=function(e){this.props.onEnhancerMouseDown(e)},r._handleMouseMove=function(e){this.props.onEnhancerMouseMove(e)},r._handleMouseUp=function(e){this.props.onEnhancerMouseUp(e)},r._isDroppable=function(e){return!!this._canvas&&this._canvas.contains(e.target)},r._handleDragStart=function(e){this.props.store.isDisabled||(this.props.useCase.dragStart(e.nativeEvent),this.props.onEnhancerDragStart(e))},r._handleDragEnter=function(e){!this.props.store.isDisabled&&this._isDroppable(e)&&this.props.useCase.dragEnter(e.dataTransfer)},r._handleDragLeave=function(e){!this.props.store.isDisabled&&this._isDroppable(e)&&this.props.useCase.dragLeave()},r._handleDragOver=function(e){var t=this._isDroppable(e);this.props.store.isDisabled||(this._dragPosition={screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,setDragImage:e.dataTransfer&&!!e.dataTransfer.setDragImage},this.props.useCase.dragOver(this._dragPosition,t),t&&e.preventDefault(),this.props.onEnhancerDragOver(e))},r._handleDragEnd=function(e){this.props.store.isDisabled||(this.props.useCase.dragEnd(),this.props.onEnhancerDragEnd(e))},r._handleDrop=function(e){if(!this.props.store.isDisabled&&(e.preventDefault(),!1!==this._isDroppable(e))){var t={screenX:e.screenX,screenY:e.screenY,clientY:e.clientY},r=e.dataTransfer;this.props.useCase.drop(t,r),this.props.onEnhancerDrop(e)}},t}(_.b.Component),s()(n.prototype,"_handleClick",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleClick"),n.prototype),s()(n.prototype,"_handleMouseDown",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleMouseDown"),n.prototype),s()(n.prototype,"_handleMouseMove",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleMouseMove"),n.prototype),s()(n.prototype,"_handleMouseUp",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleMouseUp"),n.prototype),s()(n.prototype,"_handleDragStart",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragStart"),n.prototype),s()(n.prototype,"_handleDragEnter",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragEnter"),n.prototype),s()(n.prototype,"_handleDragLeave",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragLeave"),n.prototype),s()(n.prototype,"_handleDragOver",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragOver"),n.prototype),s()(n.prototype,"_handleDragEnd",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragEnd"),n.prototype),s()(n.prototype,"_handleDrop",[d.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDrop"),n.prototype),n);m.defaultProps={onEnhancerClick:function(){},onEnhancerMouseDown:function(){},onEnhancerMouseMove:function(){},onEnhancerMouseUp:function(){},onEnhancerDragStart:function(){},onEnhancerDragOver:function(){},onEnhancerDragEnd:function(){},onEnhancerDrop:function(){}},m.propTypes={useCase:_.a.instanceOf(h.a).isRequired,children:_.a.oneOfType([_.a.arrayOf(_.a.oneOfType([_.a.element,_.a.string])),_.a.element]),className:_.a.string,store:_.a.instanceOf(l.a).isRequired,onEnhancerClick:_.a.func,onEnhancerMouseDown:_.a.func,onEnhancerMouseMove:_.a.func,onEnhancerMouseUp:_.a.func,onEnhancerDragStart:_.a.func,onEnhancerDragOver:_.a.func,onEnhancerDragEnd:_.a.func,onEnhancerDrop:_.a.func};var D=Object(v.b)(m),O=D;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/views/drag-and-drop-enhancer/index.jsx",localName:t}})}catch(e){}}e(m,"DragAndDropEnhancer"),e(D,"default")}();var E,S=r(57),w=r.n(S),k=(E=function(e){function t(){var t,r;if((t=e.call(this)||this)._isDragging=!1,t._hotkeyBinder=b.U.get("hotkeyBinder"),t._virtualEditable=b.U.get("virtualEditable"),t._wrapperDomRef=_.b.createRef(),"undefined"==typeof DragEvent||b.U.get("configAgent").isMobile())return t._shouldUseNativeDragEvent=!0,w()(t);try{new DragEvent("dragover"),r=!0}catch(e){r=!1}return t._dispatchDragEvent=r?function(e,t,r){var n=new DragEvent(e,r);t&&t.dispatchEvent(n)}:function(e,t,r){var n=document.createEvent("DragEvent"),o=r.bubbles,a=r.cancelable,i=r.view,s=r.detail,p=r.screenX,c=r.screenY,d=r.clientX,u=r.clientY,l=r.ctrlKey,g=r.altKey,h=r.shiftKey,y=r.metaKey,f=r.button,_=r.relatedTarget;n.initMouseEvent(e,o,a,i,s,p,c,d,u,l,g,h,y,f,_),t.dispatchEvent(n)},t}a()(t,e);var r=t.prototype;return r.componentWillUnmount=function(){this._isDragging&&this._finishDragging()},r.render=function(){return this._shouldUseNativeDragEvent?_.b.createElement("div",{ref:this._wrapperDomRef,className:"se-dnd-wrap se-dnd-wrap-native"},this.props.children):_.b.createElement("div",{ref:this._wrapperDomRef,className:"se-dnd-wrap",onDragStart:this._handleDragStart,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onMouseMoveCapture:this._handleMouseMove,onMouseUp:this._handleMouseUp},this.props.children)},r._handleDragStart=function(e){e.preventDefault(),this._startDragging(e.target)},r._handleMouseEnter=function(e){this._isDragging&&this._dispatchDragEvent("dragenter",e.target,e)},r._handleMouseLeave=function(e){this._isDragging&&this._dispatchDragEvent("dragleave",e.target,e)},r._handleMouseMove=function(e){this._isDragging&&(e.preventDefault(),this._dispatchDragEvent("dragover",e.target,e))},r._isEventOccuredInWrapper=function(e){return this._wrapperDomRef.current.contains(e)},r._handleMouseUp=function(e){this._isDragging&&(!0===this._isEventOccuredInWrapper(e.target)&&this._dispatchDragEvent("drop",e.target,e),this._dispatchDragEvent("dragend",this._draggingTarget,e),this._finishDragging())},r._startDragging=function(e){this._isDragging||(this._isDragging=!0,this._draggingTarget=e,this._hotkeyBinder.pause(),document.addEventListener("keydown",this._handleKeyDown,{capture:!0}),document.addEventListener("mouseup",this._handleMouseUp))},r._finishDragging=function(){this._isDragging&&(this._isDragging=!1,this._draggingTarget=null,this._hotkeyBinder.unpause(),document.removeEventListener("keydown",this._handleKeyDown,{capture:!0}),document.removeEventListener("mouseup",this._handleMouseUp))},r._handleKeyDown=function(e){if(this._isDragging){var t=e.key;e.preventDefault(),e.stopImmediatePropagation(),"PageUp"===t?this._virtualEditable.pageUp():"PageDown"===t?this._virtualEditable.pageDown():"Escape"!==t&&"Esc"!==t||(this._dispatchDragEvent("dragend",this._draggingTarget,e),this._finishDragging())}},t}(_.b.Component),s()(E.prototype,"_handleDragStart",[d.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleDragStart"),E.prototype),s()(E.prototype,"_handleMouseEnter",[d.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseEnter"),E.prototype),s()(E.prototype,"_handleMouseLeave",[d.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseLeave"),E.prototype),s()(E.prototype,"_handleMouseMove",[d.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseMove"),E.prototype),s()(E.prototype,"_handleMouseUp",[d.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseUp"),E.prototype),s()(E.prototype,"_handleKeyDown",[d.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleKeyDown"),E.prototype),E);k.propTypes={children:_.a.oneOfType([_.a.arrayOf(_.a.oneOfType([_.a.element,_.a.string])),_.a.element])};var j,P=Object(v.b)(k),M=P;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/views/drag-and-wheel-enhancer/index.jsx",localName:t}})}catch(e){}}e(k,"DragAndWheelEnhancer"),e(P,"default")}(),r.d(t,"a",function(){return C}),r.d(t,"b",function(){return U});var C=_.b.createContext({readOnly:!1}),U=(j=function(e){function t(t){var r;(r=e.call(this,t)||this).state={errorToggle:!1};var n=t.errorRecoveryUseCase,o=t.a11yFocusUseCase;return r._errorRecoveryUseCase=n,r._a11yFocusUseCase=o,r._elementRef=_.b.createRef(),window.addEventListener("error",r._handleError),r}a()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._elementRef.current.addEventListener("focusin",this._handleFocus,!1)},r.componentWillUnmount=function(){this._elementRef.current.removeEventListener("focusin",this._handleFocus,!1),window.removeEventListener("error",this._handleError)},r.render=function(){var e=this.props,t=e.children,r=e.className,n=e.dragAndDropStore,o=e.dragAndDropUseCase,a=e.appId,i=e.language,s=e.editorStatusStore,p=e.isFlexible,d=e.outsideScroll,u=c()("se-body","__se-body",{"se-body-flexible":p,"se-body-without-scroll":d});return _.b.createElement(C.Provider,{value:{readOnly:s.readOnly}},_.b.createElement("div",{id:a,className:u,lang:i,ref:this._elementRef},_.b.createElement(O,{store:n,useCase:o,className:r,onEnhancerClick:this._handleClick,onEnhancerMouseDown:this._handleMouseDown,onEnhancerMouseUp:this._handleMouseUp,onEnhancerDragStart:this._handleDragStart,onEnhancerDragOver:this._handleDragOver,onEnhancerDrop:this._handleDrop,onEnhancerDragEnd:this._handleDragEnd},_.b.createElement(M,null,_.b.createElement(_.b.Fragment,null,t)))))},r._handleError=function(e){this._errorRecoveryUseCase.recoverError(e)},r._handleClick=function(e){u.a.triggerEvent("click",e)},r._handleMouseDown=function(e){u.a.triggerEvent("mousedown",e)},r._handleMouseUp=function(e){u.a.triggerEvent("mouseup",e)},r._handleDragStart=function(){},r._handleDrop=function(){},r._handleFocus=function(e){this._a11yFocusUseCase&&this._a11yFocusUseCase.handleFocus(e)},t}(_.b.Component),s()(j.prototype,"_handleError",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleError"),j.prototype),s()(j.prototype,"_handleClick",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleClick"),j.prototype),s()(j.prototype,"_handleMouseDown",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleMouseDown"),j.prototype),s()(j.prototype,"_handleMouseUp",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleMouseUp"),j.prototype),s()(j.prototype,"_handleDragStart",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleDragStart"),j.prototype),s()(j.prototype,"_handleDrop",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleDrop"),j.prototype),s()(j.prototype,"_handleFocus",[d.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleFocus"),j.prototype),j);U.defaultProps={className:"",children:null},U.propTypes={errorRecoveryUseCase:_.a.instanceOf(y.a).isRequired,dragAndDropUseCase:_.a.instanceOf(h.a).isRequired,dragAndDropStore:_.a.instanceOf(l.a).isRequired,editorStatusStore:_.a.instanceOf(g.a).isRequired,a11yFocusUseCase:_.a.instanceOf(f.a),appId:_.a.string.isRequired,language:_.a.string.isRequired,children:_.a.oneOfType([_.a.element,_.a.array]),className:_.a.string,isFlexible:_.a.bool,outsideScroll:_.a.bool};var I=Object(v.b)(U);!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/views/smart-editor-wrapper/index.jsx",localName:t}})}catch(e){}}e(C,"SEContext"),e(U,"SmartEditorWrapper"),e(I,"default")}()},259:function(e,t,r){"use strict";r.d(t,"a",function(){return D});var n,o,a,i=r(12),s=r.n(i),p=r(18),c=r.n(p),d=r(0),u=r.n(d),l=r(50),g=r.n(l),h=r(66),y=r(95),f=r(16),_=r(51),v=r(49),b=r(666),m=r(52),D=(n=Object(m.history)({sync:!1}),o=Object(m.history)({sync:!1}),a=function(e){function t(){var t;return(t=e.call(this)||this)._imageBehavior=_.U.get("imageBehavior"),t._configAgent=_.U.get("configAgent"),t._toastLayerService=_.U.get("toastLayerService"),t._dragAndDropService=_.U.get("dragAndDropService"),t._finderService=_.U.get("finderService"),t._editingService=_.U.get("editingService"),t._canvasScrollingService=_.U.get("canvasScrollingService"),t._alertLayerService=_.U.get("alertLayerService"),t._canvasLayoutService=_.U.get("canvasLayoutService"),t._imageStripComponentService=_.U.get("imageStripComponentService"),t._imageComponentService=_.U.get("imageComponentService"),t._searchPanelLayoutService=_.U.get("searchPanelLayoutService"),t._i18n=_.U.get("i18n"),t}u()(t,e);var r=t.prototype;return r.dragStart=function(e){if(!this._dragAndDropService.isAleadyDragStart()){var t=this._finderService.getDraggableCompStoresWithinSelection();this._dragAndDropService.dragStart({event:e,items:t})}},r.dragEnter=function(e){this._dragAndDropService.dragEnter(e)},r.dragLeave=function(){this._dragAndDropService.dragLeave()},r.dragOver=function(e,t){this._dragAndDropService.dragOver(e,t),this._canvasScrollingService.scrollPage(e)},r.drop=function(){var e=c()(s.a.mark(function e(t,r){var n,o,a,i,p,c,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._dragAndDropService.filterImageFiles(r),o=this._dragAndDropService.drop(t),a=n&&!1===Object(h.a)(n.nonImageFiles),this._canvasScrollingService.forceStopAutoScroll(),o){e.next=6;break}return e.abrupt("return");case 6:if(a&&(i=this._configAgent.get("infraConfig.image.acceptExt")||b.a.DEFAULT_IMAGE_ACCEPT_LIST,p=b.a.toPrintUpperText(i),this._alertLayerService.open({type:"alert",title:this._i18n("dragAndDropUseCase:file_format_error_title"),description:this._i18n("dragAndDropUseCase:file_format_error",{allowExtList:p})})),c=o.skipDrop,!(d=o.errorMsg)){e.next=11;break}return this._showWarning(d),e.abrupt("return");case 11:if(!c){e.next=13;break}return e.abrupt("return");case 13:e.t0=o.type,e.next="external-file"===e.t0?16:"library"===e.t0?19:"template"===e.t0?21:"aside"===e.t0?23:26;break;case 16:return e.next=18,this._dropExternalFile(o);case 18:return e.abrupt("break",27);case 19:return this._dropLibrary(o),e.abrupt("break",27);case 21:return this._dropTemplate(o),e.abrupt("break",27);case 23:return e.next=25,this._dropAside(o);case 25:return e.abrupt("break",27);case 26:this._dropDefault(o);case 27:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),r._dropDefault=function(e){var t=this._makeInsertMeta(e);this._dragAndDropService.setUpdateReadySelection(!0),this._editingService.move(t)},r._dropAside=function(){var e=c()(s.a.mark(function e(t){var r,n,o,a,i,p,c,d,u,l,g,h,_,v,b,m,D=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.insertPoint,n=t.items,o=t.targetCtype,a=t.targetCompId,i=this._makeInsertMeta(t),p=n[0],c=p.ctype,d=encodeURIComponent(p.src),"image"!==c){e.next=30;break}if("image"!==o&&"imageStrip"!==o){e.next=18;break}if(u=this._imageComponentService.createShellsFromCompData(n),l=u.imageCompStores,g=u.ids,i.items=l,h=this._editingService.insertByDrop(i),!this._imageStripComponentService.isImageCompIncluded(Object(f.a)(h,"start"),r)){e.next=15;break}return _=this._imageStripComponentService.getShellUnitInfoOfImageStripComp(h),v=_.unitStores,e.abrupt("return",this._imageBehavior.insert({validFiles:[d],invalidFiles:[]},{makeComponent:function(e){return{validImages:e,invalidImages:[],shellImageCompIds:g,shellImageComps:l}}}).then(function(e){e.succeededImages.forEach(function(e){var t=e.response,r=Object(y.a)(v,{id:t.id});D._imageStripComponentService.updateShellImageUnitBy(t,r,h.start.compId)})}));case 15:return e.abrupt("return",this._imageBehavior.insert({validFiles:[d],invalidFiles:[]},{makeComponent:function(e){return{validImages:e,invalidImages:[],shellImageCompIds:g}},onEachUpload:function(e){var t=e.code,r=e.response;"SUCCESS"===t&&D._imageComponentService.updateShellImageCompStore(r.id,r)}}));case 16:e.next=28;break;case 18:if("documentTitle"!==o){e.next=24;break}return e.next=21,this._imageBehavior.insertBackgroundFromUrls(a,[d]);case 21:return e.abrupt("return",e.sent);case 24:return b=this._insertByDrop.bind(this,i),e.next=27,this._imageBehavior.dropImageFromAside(n,b);case 27:return e.abrupt("return",e.sent);case 28:e.next=39;break;case 30:if("material"!==c||"news"!==p.type){e.next=38;break}return e.next=33,this._searchPanelLayoutService.itemDataToStore(p);case 33:m=e.sent,i.items=[m],this._editingService.insertByDrop(i),e.next=39;break;case 38:this._editingService.insertByDrop(i);case 39:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._makeInsertMeta=function(e){return{insertPoint:e.insertPoint,insertCommand:e.insertCommand,items:e.items}},r._dropTemplate=function(e){var t=this._makeInsertMeta(e);t.followCurrentAlign=!1,this._editingService.insertByDrop(t)},r._dropLibrary=function(e){var t=this._makeInsertMeta(e);this._editingService.insertByDrop(t)},r._dropExternalFile=function(){var e=c()(s.a.mark(function e(t){var r,n,o,a,i,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.items,n=t.targetCtype,o=t.targetCompId,a=this._makeInsertMeta(t),"documentTitle"!==n){e.next=9;break}return i=this._insertBackgroundImageByDrop.bind(this,a),e.next=6,this._imageBehavior.insertExternalBackground(o,[r[0]],i);case 6:return e.abrupt("return",e.sent);case 9:return p=this._insertByDrop.bind(this,a),e.next=12,this._imageBehavior.insertExternalImage(r,p);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._insertByDrop=function(e,t){e.items=t,this._editingService.insertByDrop(e)},r._insertBackgroundImageByDrop=function(e,t){var r=this._dragAndDropService.getBackgroundImageData(t);e.items=[r],this._editingService.insertByDrop(e)},r.dragEnd=function(){this._dragAndDropService.reset(),this._canvasLayoutService.refreshVirtualEditable(),this._canvasScrollingService.forceStopAutoScroll()},r._showWarning=function(e){e&&this._toastLayerService.warningMessage(e)},r.hideIENativeDragGhost=function(e){this._dragAndDropService.hideIENativeDragGhost(e)},t}(_.m),g()(a.prototype,"dragStart",[m.preventOnComponentProcessing,v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragStart"),a.prototype),g()(a.prototype,"dragEnter",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragEnter"),a.prototype),g()(a.prototype,"dragLeave",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragLeave"),a.prototype),g()(a.prototype,"dragOver",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragOver"),a.prototype),g()(a.prototype,"drop",[m.sentryCatch,v.d],Object.getOwnPropertyDescriptor(a.prototype,"drop"),a.prototype),g()(a.prototype,"_dropDefault",[v.d,m.history],Object.getOwnPropertyDescriptor(a.prototype,"_dropDefault"),a.prototype),g()(a.prototype,"_dropAside",[v.d,n],Object.getOwnPropertyDescriptor(a.prototype,"_dropAside"),a.prototype),g()(a.prototype,"_dropTemplate",[m.history],Object.getOwnPropertyDescriptor(a.prototype,"_dropTemplate"),a.prototype),g()(a.prototype,"_dropLibrary",[m.history],Object.getOwnPropertyDescriptor(a.prototype,"_dropLibrary"),a.prototype),g()(a.prototype,"_dropExternalFile",[v.d,o],Object.getOwnPropertyDescriptor(a.prototype,"_dropExternalFile"),a.prototype),g()(a.prototype,"dragEnd",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragEnd"),a.prototype),a);!function(){!function(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/use-case/drag-and-drop-use-case.js",localName:t}})}catch(e){}}(D,"DragAndDropUseCase")}()},737:function(e,t,r){"use strict";var n,o=r(50),a=r.n(o),i=r(51),s=r(49),p=r(16),c=r(94),d=(n=function(){function e(){this._canvasScrollingService=i.U.get("canvasScrollingService"),this._domAccessor=i.U.get("domAccessor"),this._virtualEditable=i.U.get("virtualEditable"),this._sentryManager=i.U.get("sentryManager"),this._interceptorAjaxError()}var t=e.prototype;return t.recoverError=function(e){if(this._canvasScrollingService.focusToFirstComp(),this._domAccessor.reset(),this._virtualEditable.recover(),!e)return!1;try{this._sentryManager.captureException(e)}catch(e){}},t._interceptorAjaxError=function(){var e=this;c.b.addResponseErrorInterceptor(function(t){var r=Object(p.a)(t,"response.status");if(!1===[200,400,403].includes(r)){var n=t;n.isSELog=!0,e._sentryManager.captureException(n)}},Number.MAX_SAFE_INTEGER)},e}(),a()(n.prototype,"recoverError",[s.d],Object.getOwnPropertyDescriptor(n.prototype,"recoverError"),n.prototype),n),u=d;t.a=u,function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/use-case/error-recovery-use-case.js",localName:t}})}catch(e){}}e(d,"ErrorRecoveryUseCase"),e(u,"default")}()},738:function(e,t,r){"use strict";var n,o=r(50),a=r.n(o),i=r(51),s=r(49),p=(n=function(){function e(){this._a11yService=i.U.get("a11yService")}return e.prototype.handleFocus=function(e){var t=e.relatedTarget;t&&t!==document.body&&this._a11yService&&!this._a11yService.isInsideEditorWrapper(t)&&this._a11yService.focusToEditable()},e}(),a()(n.prototype,"handleFocus",[s.d],Object.getOwnPropertyDescriptor(n.prototype,"handleFocus"),n.prototype),n),c=p;t.a=c,function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/use-case/a11y-focus-use-case.js",localName:t}})}catch(e){}}e(p,"A11yFocusUseCase"),e(c,"default")}()}}]);