(window.__se_editor_jsonp=window.__se_editor_jsonp||[]).push([[69],{1208:function(e,n,t){var o;/*!phup.js#v0.2.10*/ /*!phup.js#v0.2.10*/
!function(){"use strict";var a=function(){var e=function(){return(new Date).getMilliseconds()+Math.floor(1e5*Math.random())},n=function(e,n){var t=document.createElement("iframe");return t.src=n,t.style.display="none",t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.left="-100px",t.style.top="-100px",e.appendChild(t),t},t=function(e,n){var t,o,a,i={};for(t=n.replace("<![CDATA[","").replace("]]>","").match(/<?[^>]*?>([\S\s]*)/)[1].match(/<([^>]*)>([^<]*)<\/([^>]*)>/g),o=0;o<t.length;o+=1)"exif"===(a=t[o].match(/<([^>]*)>([^<]*)<\/[^>]*>/))[1]&&(a[2]=a[2].replace(/&quot;/g,'"')),"index"===a[1]?i[a[1]]=parseInt(a[2],10):"width"===a[1]?i[a[1]]=parseInt(a[2],10):"height"===a[1]?i[a[1]]=parseInt(a[2],10):"fileSize"===a[1]?i[a[1]]=parseInt(a[2],10):"convertedFileSize"===a[1]?i[a[1]]=parseInt(a[2],10):"animatedCnt"===a[1]?i[a[1]]=parseInt(a[2],10):"checkHarm"===a[1]?i[a[1]]="true"==a[2]:i[a[1]]=a[2];return void 0===i.code?i.code="IMAGE":i={index:e,code:i.code},i},o=function(){var e;try{if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){e=new ActiveXObject("Microsoft.XMLHTTP")}}finally{return e}},a=function(e,n){var t,o=e.substring(e.lastIndexOf(".")+1).toLowerCase();for(t=0;t<n.length;t+=1)if(o===n[t])return!0;return!1},i=function(e,n,a,i,r,s,l){var u=o(),c=new window.FormData;c.append("image",a),u.onload=function(){200===u.status?(e.value=null,i(t(n,u.responseText))):i({index:n,code:"CLIENT"})},u.open("POST",r,!0),l&&l({el:e,index:n,fileName:a.name,xhr:u}),s.millisecond>0&&(u.timeout=s.millisecond,u.ontimeout=function(){s.handler({index:n,fileName:a.name})}),u.send(c)},r=function(e){return function(e){return e?"https:":"http:"}(e.sslEnabled)+"//"+e.domain+"/"+e.sessionKey+"/simpleUpload/"+e.index+"?userId="+e.userId+"&extractExif="+e.extractExif+"&extractAnimatedCnt="+e.extractAnimatedCnt+"&autorotate="+e.autorotate+"&extractDominantColor="+e.extractDominantColor+"&type="+e.type+"&customQuery="+e.customQuery},s=[],l=function(e){return function(n){e.done=!0,e.handler(function(e,n){var t,o,a,i={},r=n.split("|");for(t=0;t<r.length;t+=1)(o=r[t].split("="))[1]?("exif"===o[0]?i[o[0]]=o[1].replace(/&quot;/g,'"'):!0===/^[0-9]+$/.test(o[1])?i[o[0]]=parseInt(o[1]):i[o[0]]=o[1],a=o[0]):i[a]=i[a]+"|"+o[0];return i.index=e,i}(e.index,n)),window[e.callback]=null}},u=function(e){e.millisecond>0&&setTimeout(function(){e.done||(window[e.callback]=function(){window[e.callback]=null},e.timeoutHandler({index:e.index,fileName:e.fileName}))},e.millisecond)},c=function(e){if(""===e.el.value)return!1},m=function(e){if(!e.sessionKey)return e.handler({code:"FAIL_TO_GET_SESSION_KEY"}),!1},d=function(e){return e.form?!1!==a(e.imageFileName,e.allowedImageType)||(e.handler({code:"UNSUPPORTED_EXTENSION"}),!1):(e.handler({code:"FAIL_TO_LOAD_IFRAME"}),!1)},p=function(e){return{isNotEmptyString:function(n){if(!("string"==typeof n.value&&n.value.length>0))throw e+n.name+" must be a not empty string"},isString:function(n){if("string"!=typeof n.value)throw e+n.name+" must be a string"},isFunction:function(n){if(!n.value||"function"!=typeof n.value)throw e+n.name+" must be a function"},isBoolean:function(n){if("boolean"!=typeof n.value)throw e+n.name+" must be a boolean"},isNumber:function(n){if("number"!=typeof n.value)throw e+n.name+" must be a number"},isNotEmptyArray:function(n){if(!(n.value instanceof Array&&n.value.length>0))throw e+n.name+" must be a not empty array"},isNotNull:function(n){if(null==n.value)throw e+n.name+" must not be null"},isInputTag:function(n){if(!n.value||!n.value.tagName||"INPUT"!==n.value.tagName)throw e+n.name+" must be an input tag"},isFile:function(n){if(!window.File||!(n.value instanceof File||"[object File]"===n.value.toString()))throw e+n.name+" must be a File"}}},f=void 0!==o()&&void 0!==window.File&&(/naver\.net$/.test(document.domain)||/naver\.com$/.test(document.domain)||/navercorp\.com$/.test(document.domain)||/arcadur\.com$/.test(document.domain)||/webtoons\.com$/.test(document.domain)||/linedict\.com$/.test(document.domain)||/pholar\.co$/.test(document.domain)||/vlive\.tv$/.test(document.domain)||/line\.me$/.test(document.domain)||/line\.biz$/.test(document.domain)||/modoo\.at$/.test(document.domain)||/plug\.game$/.test(document.domain)||/grafolio\.com$/.test(document.domain)||/playsw\.or\.kr$/.test(document.domain)||/selective\.me$/.test(document.domain)||/article\.me$/.test(document.domain)||/whalespace\.io$/.test(document.domain)||/storefarmcenter\.jp$/.test(document.domain)||/storefarm\.jp$/.test(document.domain)||/smartstorecenter\.jp$/.test(document.domain)||/mysmartstore\.jp$/.test(document.domain)),h={getUploader:function(a,i,s){var c,h,g,y,v,x,w,b,E,_,N,I,S,C,F,A,T=document.getElementsByTagName("body")[0],P=new p("[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : "),j={BASE64:{upload:function(n){var p,g=n&&n.base64image,N=n&&n.imageFileName,T=n&&(n.index||0),j="phup_callback_"+e(),O={index:T,millisecond:C.millisecond,handler:i,timeoutHandler:C.handler,done:void 0,callback:j,fileName:N};k(s),P.isNotEmptyString({value:g,name:"param.base64image"}),P.isNotEmptyString({value:N,name:"param.imageFileName"}),S(function(e){var n,s,S=r({sslEnabled:x,domain:y,sessionKey:e,userId:v,extractExif:w,extractAnimatedCnt:b,extractDominantColor:E,autorotate:_,index:T,type:a,customQuery:A});if(0!=m({sessionKey:e,handler:i}))if(f)n=o(),(s=new window.FormData).append("imageFileName",N),s.append("base64image",g),n.onload=function(){200===n.status?i(t(T,n.responseText)):i({index:T,code:"CLIENT"})},n.open("POST",S,!0),F&&F({index:T,fileName:N,xhr:n}),C.millisecond>0&&(n.timeout=C.millisecond,n.ontimeout=function(){C.handler({index:T,fileName:file.name})}),n.send(s);else{if(h=c.contentWindow.document.getElementById("phup_upload_form"),0==d({form:h,handler:i,imageFileName:N,allowedImageType:I}))return;for(window[j]=l(O),p=h.firstChild;null!=p;p=p.nextSibling)switch(p.id){case"phup_callback_func":p.value=j;break;case"imageFileName":p.value=N,p.disabled=null;break;case"base64image":p.value=g,p.disabled=null}h.action=r({sslEnabled:x,domain:y,sessionKey:e,userId:v,extractExif:w,extractAnimatedCnt:b,extractDominantColor:E,autorotate:_,index:T,type:a,customQuery:A}),F&&F({el:el,index:T,fileName:N}),h.submit(),u(O),h.reset()}})}},SIMPLE:{upload:function(n){var l=n&&n.file,u=n&&(n.imageFileName||""),c=n&&(n.index||0);e(),C.millisecond,C.handler;k(s),P.isFile({value:l,name:"param.file"}),P.isString({value:u,name:"param.imageFileName"}),S(function(e){var n,s,d=r({sslEnabled:x,domain:y,sessionKey:e,userId:v,extractExif:w,extractAnimatedCnt:b,extractDominantColor:E,autorotate:_,index:c,type:a,customQuery:A});if(0!=m({sessionKey:e,handler:i})){if(!f)throw"[phup.js] error : SIMPLE uploader requires File & FormData";n=o(),s=new window.FormData,u.length>0&&s.append("imageFileName",u),s.append("image",l),n.onload=function(){200===n.status?i(t(c,n.responseText)):i({index:c,code:"CLIENT"})},n.open("POST",d,!0),F&&F({index:c,fileName:l.name,xhr:n}),C.millisecond>0&&(n.timeout=C.millisecond,n.ontimeout=function(){C.handler({index:c,fileName:l.name})}),n.send(s)}})}}}[a],k=function(e){g=e&&e.resourcePath||"",y=e&&e.domain,v=e&&e.userId,x=e&&(e.sslEnabled||!1),w=e&&(e.extractExif||!1),b=e&&(e.extractAnimatedCnt||!1),E=e&&(e.extractDominantColor||!1),_=e&&(e.autorotate||!1),N=e&&(e.maxFileSize||10485760),I=e&&e.allowedImageType||["png","jpg","jpeg","bmp","gif"],S=e&&e.getSessionKey,C=e&&(e.timeout||{millisecond:0,handler:function(){}}),F=e&&e.onstart,a=e&&e.type||"",A=e&&e.customQuery||"",P.isNotEmptyString({value:y,name:"options.domain"}),P.isNotEmptyString({value:v,name:"options.userId"}),P.isFunction({value:S,name:"options.getSessionKey"}),P.isBoolean({value:x,name:"options.sslEnabled"}),P.isBoolean({value:w,name:"options.extractExif"}),P.isBoolean({value:b,name:"options.extractAnimatedCnt"}),P.isBoolean({value:E,name:"options.extractDominantColor"}),P.isBoolean({value:_,name:"options.autorotate"}),P.isNumber({value:N,name:"options.maxFileSize"}),P.isNotEmptyArray({value:I,name:"options.allowedImageType"}),P.isNumber({value:C.millisecond,name:"options.timeout.millisecond"}),P.isFunction({value:C.handler,name:"options.timeout.handler"}),F&&P.isFunction({value:F,name:"options.onstart"}),P.isString({value:a,name:"options.type"}),P.isString({value:A,name:"options.customQuery"}),c||f||(c=n(T,g+"/phup_frame.html"))};return P.isNotEmptyString({value:a,name:"type"}),P.isNotNull({value:s,name:"options"}),"function"!=typeof s&&k(s),j}};return h.config=function(t,o,h){var g,y,v,x,w,b,E,_,N,I,S,C,F,A,T,P,j,k,O,U=document.getElementsByTagName("body")[0],B=document.createElement("div"),M=t&&t.onclick,R=t&&t.onchange,$=(t&&t.multiple,new p("[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : ")),D=function(e){x=e&&e.resourcePath||"",w=e&&e.domain,b=e&&e.userId,E=e&&(e.sslEnabled||!1),_=e&&(e.extractExif||!1),N=e&&(e.extractAnimatedCnt||!1),I=e&&(e.extractDominantColor||!1),S=e&&(e.autorotate||!1),C=e&&(e.maxFileSize||10485760),F=e&&e.allowedImageType||["png","jpg","jpeg","bmp","gif"],A=e&&e.getSessionKey,T=e&&(e.timeout||{millisecond:0,handler:function(){}}),P=e&&e.onstart,k=e&&e.type||"",O=e&&e.customQuery||"",$.isNotEmptyString({value:w,name:"options.domain"}),$.isNotEmptyString({value:b,name:"options.userId"}),$.isFunction({value:A,name:"options.getSessionKey"}),$.isBoolean({value:E,name:"options.sslEnabled"}),$.isBoolean({value:_,name:"options.extractExif"}),$.isBoolean({value:N,name:"options.extractAnimatedCnt"}),$.isBoolean({value:I,name:"options.extractDominantColor"}),$.isBoolean({value:S,name:"options.autorotate"}),$.isNumber({value:C,name:"options.maxFileSize"}),$.isNotEmptyArray({value:F,name:"options.allowedImageType"}),$.isNumber({value:T.millisecond,name:"options.timeout.millisecond"}),$.isFunction({value:T.handler,name:"options.timeout.handler"}),P&&$.isFunction({value:P,name:"options.onstart"}),$.isString({value:k,name:"options.type"}),$.isString({value:O,name:"options.customQuery"}),y||f||(y=n(U,x+"/phup_frame.html"))};for(j in $.isInputTag({value:t,name:"el"}),s)if(s.hasOwnProperty(j)&&s[j]==t)throw"[phup.js] error : el is already bound with phup.js";s.push(t),$.isFunction({value:o,name:"handler"}),$.isNotNull({value:h,name:"options"}),"function"!=typeof h&&D(h),t.onclick=function(e){if(M&&M(e),"function"==typeof h&&D(h()),A(function(e){g=e,v&&t.onupload(v)}),!document.documentMode)t.value="";else if(10!=function(){var e,n="N/A",t=navigator.userAgent.toLowerCase();return e="Microsoft Internet Explorer"==navigator.appName?"msie ":"trident/.*rv:",null!=new RegExp(e+"([0-9]{1,})(\\.{0,}[0-9]{0,1})").exec(t)&&(n=RegExp.$1+RegExp.$2),parseInt(n,10)}()){var n=t.parentNode,o=t.nextSibling,a=document.createElement("form");a.appendChild(t),a.reset(),n.insertBefore(t,o)}else t.type="radio",t.type="file"},f?(t.onupload=function(){var e,n=t.files;if(R&&R(),0!=c({el:t})&&0!=m({sessionKey:g,handler:o}))for(e=0;e<n.length;e+=1)!1===a(n[e].name,F)?o({index:e,code:"UNSUPPORTED_EXTENSION"}):n[e].size>C?o({index:e,code:"LIMITATION_BY_IMAGE"}):i(t,e,n[e],o,r({sslEnabled:E,domain:w,sessionKey:g,userId:b,extractExif:_,extractAnimatedCnt:N,extractDominantColor:I,autorotate:S,index:e,type:k,customQuery:O}),T,P)},t.onchange=function(e){g?(t.onupload(e),v=null):v=e}):(t.multiple=!1,t.onupload=function(n){var a,i=t.name,s=t.value.replace(/^C:\\fakepath\\/,""),p=t.parentNode,f=t.onclick,h=y.contentWindow.document.getElementById("phup_upload_form"),v="phup_callback_"+e(),x={index:0,millisecond:T.millisecond,handler:function(e){t.onclick=f,o(e)},timeoutHandler:function(e){t.onclick=f,T.handler(e)},done:void 0,callback:v,fileName:s};if(R&&R(n),0!=c({el:t})&&0!=m({sessionKey:g,handler:o})&&0!=d({form:h,handler:o,imageFileName:s,allowedImageType:F})){for(window[v]=l(x),t.name="image",t.onclick=function(e){e&&e.preventDefault&&e.preventDefault()},p.replaceChild(B,t),h.appendChild(t),a=h.firstChild;null!=a;a=a.nextSibling)switch(a.id){case"phup_callback_func":a.value=v}h.action=r({sslEnabled:E,domain:w,sessionKey:g,userId:b,extractExif:_,extractAnimatedCnt:N,extractDominantColor:I,autorotate:S,index:0,type:k,customQuery:O}),P&&P({el:t,index:0,fileName:s}),h.submit(),u(x),h.reset(),t.name=i,p.replaceChild(t,B),t.onclick=f}},t.onchange=function(e){g?(t.onupload(e),v=null):v=e})},h};void 0===(o=function(){return new a}.call(n,t,n,e))||(e.exports=o)}()},1289:function(e,n,t){"use strict";t.r(n);var o=t(59),a=t.n(o),i=t(12),r=t.n(i),s=t(18),l=t.n(s),u=t(0),c=t.n(u),m=function(){function e(){}var n=e.prototype;return n.warmUp=function(){throw new Error("warmUp 인터페이스 구현이 필요합니다. 업로드 전에 준비해야 하는 로직 구현.")},n.upload=function(){throw new Error("upload 인터페이스 구현이 필요합니다. 이미지 파일, URL Copy, BASE64 이미지 데이터 업로드 기능 구현.")},e}(),d=m;!function(){function e(e,n){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/modules/abstract/abstract-image-uploader.js",localName:n}})}catch(e){}}e(m,"AbstractImageUploader"),e(d,"default")}();var p=t(666),f=t(526),h=t(16),g=t(74),y=t(1208),v=t.n(y),x=t(94),w=function(e){function n(n){var t;return(t=e.call(this)||this).PROVIDER="NAVER_PHOTO_INFRA",t._config=n,t._phup=v.a||window.phup,t}c()(n,e);var t=n.prototype;return t.setConfig=function(e){this._config=e},t.warmUp=function(){var e=l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._makeSessionKey(this._config.sessionUrl);case 2:this._sessionKey=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.upload=function(e){return p.a.isFile(e)?this._uploadImageByFile(e):e.indexOf("http")>-1?this._uploadImageByUrl(e):this._uploadImageByBASE64(e)},t._uploadImageByFile=function(e){var n=this,t={file:e,imageFileName:e.fileName};return new Promise(function(e,o){var a=n._config.imageHost;n._createPhupUploaders("SIMPLE",function(n){"IMAGE"===n.code?(n.code="SUCCESS",n.domain=a,e(n)):o({code:n.code})}).upload(t)})},t._uploadImageByBASE64=function(e){var n=this;return new Promise(function(t,o){var a={base64image:e.replace("data:image/png;base64,",""),imageFileName:"image.jpg"},i=n._config.imageHost;n._createPhupUploaders("BASE64",function(e){"IMAGE"===e.code?(e.code="SUCCESS",e.domain=i,t(e)):o({code:e.code})}).upload(a)})},t._uploadImageByUrl=function(e){var n=Math.floor(1e6*Math.random()),t=(this._config.sslEnabled?"https://":"http://")+[this._config.domain,this._sessionKey,"simpleUpload",n].join("/"),o={copyurl:decodeURIComponent(e),extractExif:!0,autorotate:!0,extractAnimatedCnt:!0,userId:this._config.userId},i=this._config.imageHost;return this._config.useCustomQuery&&this._config.customQuery&&(o.customQuery=this._config.customQuery),new Promise(function(n,r){x.b.post(t,{data:o,options:{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,responseType:"xml",simpleRequestForced:!0},parser:function(e){return e},success:function(t){var o=t.data;if(o.item){var s=o.item||{};n(a()({code:"SUCCESS",domain:i},s))}else{var l=Object(h.a)(o,"result.errors.error.reason.code"),u=f.a.getLocationFromUrlString(decodeURI(e)),c=Object(g.a)(Object(h.a)(u,"pathname","").split("/"));r({file:{name:c,size:0},code:l})}},error:function(){return r({code:"FAIL"})}})})},t._createPhupUploaders=function(e,n){var t=this._createPhupOption(n).options;return"SIMPLE"===e?this._phup.getUploader("SIMPLE",n,t):this._phup.getUploader("BASE64",n,t)},t._makeSessionKey=function(e){return new Promise(function(n,t){x.b.get(e,{options:{withCredentials:!0},success:function(e){n(e.sessionKey)},error:function(e){t(e)}})})},t._createPhupOption=function(e){var n=this,t={domain:this._config.domain||"test.upphoto.naver.com",getSessionKey:function(e){e(n._sessionKey)},userId:this._config.userId,sslEnabled:this._config.sslEnabled,autorotate:!0,resourcePath:this._config.resourcePath+"/lib/phupjs",extractExif:!0,extractAnimatedCnt:!0,onstart:function(n){var t=n.index,o=n.xhr;o&&(o.onerror=function(){return e({index:t,code:"SERVER_ERROR"})})}};return this._config.useCustomQuery&&this._config.customQuery&&(t.customQuery=encodeURIComponent(this._config.customQuery)),{options:t}},n}(m),b=w;n.default=b;!function(){function e(e,n){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-basic-desktop-real/workspace/packages/common/shared-parts/modules/naver-photoinfra-uploader/index.js",localName:n}})}catch(e){}}e(w,"NaverPhotoInfraUploader"),e(b,"default")}()}}]);